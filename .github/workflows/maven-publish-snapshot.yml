name: Build and Update snapshot version

on:
  push:
    branches:
      - '*-development'

jobs:
  build:
        runs-on: ubuntu-latest
        steps:
          - name: Checkout repository
            uses: actions/checkout@v2
            with:
              fetch-depth: 0 # Fetch all history for tags and branches

          - name: Set up JDK 21
            uses: actions/setup-java@v3
            with:
              distribution: 'temurin'
              java-version: '21'
              cache: maven

          - name: Setup SSH
            uses: webfactory/ssh-agent@v0.5.3
            with:
              ssh-private-key: ${{ secrets.SSH_PRIVATE_KEY }}

          - name: Configure Git to use SSH
            run: |
              git remote set-url origin git@github.com:ueno-tecnologia-org/spring-boot-starter-data-mongodb-secured.git

          - name: Checkout main branch
            run: |  
              echo $(git rev-parse --abbrev-ref HEAD)
